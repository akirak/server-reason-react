<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>externals-melange-attributes (docs.local.server-reason-react.externals-melange-attributes)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> â€“ <a href="../../index.html">docs</a> &#x00BB; <a href="../index.html">local</a> &#x00BB; <a href="index.html">server-reason-react</a> &#x00BB; externals-melange-attributes</nav><header class="odoc-preamble"><h1 id="externals-and-melange-attributes"><a href="#externals-and-melange-attributes" class="anchor"></a>Externals and melange attributes</h1><p><code>melange.ppx</code> is designed to preprocess Melange programs (simplifying code generation for common use cases like generating bindings or code from types). It's not compatible with native, but if you want to share a module with <code>melange.ppx</code> we provide a drop-in replacement called: <code>server-reason-react.melange_ppx</code>.</p><p>Most of the features are shimmed to not work on the server and the compiler will warn to wrap it in <code>browser_only</code> expressions.</p></header><nav class="odoc-toc"><ul><li><a href="#server-reason-react.melange_ppx-supports"><code>server-reason-react.melange_ppx</code> supports</a><ul><li><a href="#all-mel.-attributes">All <code>mel.</code> attributes</a></li><li><a href="#enables-pipe_first--&gt;">Enables pipe_first <code>-&gt;</code></a></li><li><a href="#supports-regexp-[%re-&quot;/regex/&quot;]">Supports RegExp <code>[%re &quot;/regex/&quot;]</code></a></li><li><a href="#debugger-%debugger">Debugger <code>%debugger</code></a></li><li><a href="#supports-js.t-(object-access-##-and-mel.obj)">Supports Js.t (object access <code>##</code> and mel.obj)</a></li></ul></li><li><a href="#usage">Usage</a></li><li><a href="#next">Next</a></li></ul></nav><div class="odoc-content"><h2 id="server-reason-react.melange_ppx-supports"><a href="#server-reason-react.melange_ppx-supports" class="anchor"></a><code>server-reason-react.melange_ppx</code> supports</h2><h3 id="all-mel.-attributes"><a href="#all-mel.-attributes" class="anchor"></a>All <code>mel.</code> attributes</h3><p>mel.* attributes are stripped out of the native build, and transformed into raising functions to raise at server runtime.</p><h3 id="enables-pipe_first--&gt;"><a href="#enables-pipe_first--&gt;" class="anchor"></a>Enables pipe_first <code>-&gt;</code></h3><p>Pipe first is the operator to apply a function to a value where data is passed as the first argument. <code>-&gt;</code> is a convenient operator that allows you to &quot;flip&quot; your code inside-out.</p><p>It's not supported in native OCaml, but <code>server-reason-react.melange_ppx</code> enables it and works as expected.</p><h3 id="supports-regexp-[%re-&quot;/regex/&quot;]"><a href="#supports-regexp-[%re-&quot;/regex/&quot;]" class="anchor"></a>Supports RegExp <code>[%re &quot;/regex/&quot;]</code></h3><p>Transforms <code>[%re ...]</code> into <code>Js.Re.t</code> from <code>server-reason-react.js</code> and it uses a C implementation of the regex engine from QuickJS from <a href="https://github.com/ml-in-barcelona/quickjs.ml">quickjs.ml</a>. (Experimental)</p><h3 id="debugger-%debugger"><a href="#debugger-%debugger" class="anchor"></a>Debugger <code>%debugger</code></h3><p>It removes the debugger in native. It's a noop on the server context, and it's pretty uncommon it's usage.</p><h3 id="supports-js.t-(object-access-##-and-mel.obj)"><a href="#supports-js.t-(object-access-##-and-mel.obj)" class="anchor"></a>Supports Js.t (object access <code>##</code> and mel.obj)</h3><pre class="language-ocaml"><code>let john = {&quot;name&quot;: &quot;john&quot;, &quot;age&quot;: 99};
/* The type of john is `{ . &quot;age&quot;: int, &quot;name&quot;: string }` which represents a
JavaScript Object. */
let name = john##name;</code></pre><p>https://melange.re/v3.0.0/communicate-with-javascript.html#using-js-t-objects</p><p>Object creation and object field access is designed to interact with JavaScript Objects, in native we reperesent those as OCaml Objects (which are very different) and <code>server-reason-react-ppx.melange_ppx</code> proviedes the implementation to make it work. (Experimental)</p><h2 id="usage"><a href="#usage" class="anchor"></a>Usage</h2><p>To use <code>server-reason-react.melange_ppx</code> you need to add it to your dune's pps field:</p><pre class="language-ocaml"><code>(preprocess (pps server-reason-react.melange_ppx)) </code></pre><h2 id="next"><a href="#next" class="anchor"></a>Next</h2><p><a href="code-structure.html" title="code-structure">How to structure the code</a></p></div></body></html>
